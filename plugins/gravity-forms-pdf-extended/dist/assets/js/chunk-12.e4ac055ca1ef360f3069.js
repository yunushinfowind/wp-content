(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{181:function(e,t,r){"use strict";r.r(t),r(80),r(66),r(159);var n=r(1),a=r.n(n),o=r(2),s=r.n(o),i=r(36),l=r(166),c=r(167),p=r(185),u=r(4),f=function(e){var t=e.image,r=t?"theme-screenshot":"theme-screenshot blank";return a.a.createElement("div",{className:r},t?a.a.createElement("img",{src:t,alt:""}):null)};f.propTypes={image:s.a.string};var m=f,d=r(160),b=function(e){var t=e.label;return a.a.createElement("span",{className:"more-details"},t)};b.propTypes={label:s.a.string};var y=function(e){var t=e.group;return a.a.createElement("p",{className:"theme-author"},t)};y.propTypes={group:s.a.string};var h=r(164),g=r(165);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){function t(){var e,r;!function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return O(E(r=function(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?E(e):t}(this,(e=x(t)).call.apply(e,[this].concat(a)))),"maybeShowDetailedTemplate",function(e){13===e.keyCode&&-1===e.target.className.indexOf("button")&&r.showDetailedTemplate()}),O(E(r),"showDetailedTemplate",function(){r.props.history.push("/template/"+r.props.template.id)}),O(E(r),"removeMessage",function(){r.props.updateTemplateParam(r.props.template.id,"message",null)}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,a.a.Component),function(e,t,r){t&&T(e.prototype,t)}(t,[{key:"render",value:function(){var e=this.props.template,t=this.props.activeTemplate===e.id,r=e.compatible,n=t?"active theme":"theme";return a.a.createElement("div",{onClick:this.showDetailedTemplate,onKeyDown:this.maybeShowDetailedTemplate,className:n,"data-slug":e.id,tabIndex:"150"},a.a.createElement(m,{image:e.screenshot}),e.error?a.a.createElement(d.a,{text:e.error,error:!0}):null,e.message?a.a.createElement(d.a,{text:e.message,dismissableCallback:this.removeMessage,dismissable:!0,delay:12e3}):null,a.a.createElement(b,{label:this.props.templateDetailsText}),a.a.createElement(y,{group:e.group}),a.a.createElement(h.e,{name:e.template}),a.a.createElement("div",{className:"theme-actions"},!t&&r?a.a.createElement(g.a,{template:this.props.template,buttonText:this.props.activateText}):null))}}]),t}();O(S,"propTypes",{history:s.a.object,template:s.a.object,activeTemplate:s.a.string,updateTemplateParam:s.a.func,activateText:s.a.string,templateDetailsText:s.a.string});var w=Object(p.a)(Object(i.b)(function(e){return{activeTemplate:e.template.activeTemplate}},function(e){return{updateTemplateParam:function(t,r,n){e(Object(u.E)(t,r,n))}}})(S)),P=(r(163),r(161)),U=r.n(P);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=function(e){function t(){var e,r;!function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return C(N(r=function(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?N(e):t}(this,(e=I(t)).call.apply(e,[this].concat(a)))),"handleSearch",function(e){e.persist(),r.runSearch(e)}),C(N(r),"runSearch",function(e){r.props.onSearch(e.target.value||"")}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,a.a.Component),function(e,t,r){t&&k(e.prototype,t)}(t,[{key:"componentWillMount",value:function(){this.runSearch=U()(this.runSearch,200)}},{key:"componentDidMount",value:function(){this.input.focus()}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("input",{className:"wp-filter-search",id:"wp-filter-search-input",ref:function(t){return e.input=t},placeholder:"Search Installed Templates",type:"search","aria-describedby":"live-search-desc",tabIndex:"145",onChange:this.handleSearch,defaultValue:this.props.search}))}}]),t}();C(z,"propTypes",{onSearch:s.a.func,search:s.a.string});var F=Object(i.b)(function(e){return{search:e.template.search}},function(e){return{onSearch:function(t){e(Object(u.u)(t))}}})(z),R=function(e){var t=e.header;return a.a.createElement("h1",null,t)};R.propTypes={header:s.a.string};var A=R,M=(r(82),r(68),r(51),r(50),r(69),r(10),r(56),r(173)),G=r.n(M),H=r(179);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=function(e){function t(){var e,r;!function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return B(V(r=function(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?V(e):t}(this,(e=L(t)).call.apply(e,[this].concat(a)))),"state",{ajax:!1,error:"",message:""}),B(V(r),"onDrop",function(e){e instanceof Array&&0<e.length&&e.forEach(function(e){var t=e.name;r.checkFilename(t)&&r.checkFilesize(e.size)&&(r.setState({ajax:!0,error:"",message:""}),r.props.postTemplateUploadProcessing(e,t))})}),B(V(r),"checkFilename",function(e){return".zip"===e.substr(e.length-4)||(r.setState({error:r.props.filenameErrorText}),!1)}),B(V(r),"checkFilesize",function(e){return!(10240<e/1024&&(r.setState({error:r.props.filesizeErrorText}),1))}),B(V(r),"ajaxSuccess",function(e){e.body.templates.forEach(function(e){void 0===r.props.templates.find(function(t){return t.id===e.id})?(e.new=!0,e.message=r.props.installSuccessText,r.props.addNewTemplate(e)):r.props.updateTemplateParam(e.id,"message",r.props.installUpdatedText)}),r.setState({ajax:!1,message:r.props.templateSuccessfullyInstalledUpdated}),r.props.clearTemplateUploadProcessing()}),B(V(r),"ajaxFailed",function(e){r.setState({error:e.response.body&&void 0!==e.response.body.error?e.response.body.error:r.props.genericUploadErrorText,ajax:!1}),r.props.clearTemplateUploadProcessing()}),B(V(r),"removeMessage",function(){r.setState({message:""})}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,a.a.Component),function(e,t,r){t&&K(e.prototype,t)}(t,[{key:"componentWillReceiveProps",value:function(e){0<Object.keys(e.templateUploadProcessingSuccess).length&&this.ajaxSuccess(e.templateUploadProcessingSuccess),0<Object.keys(e.templateUploadProcessingError).length&&this.ajaxFailed(e.templateUploadProcessingError)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"theme add-new-theme gfpdf-dropzone"},a.a.createElement(H.a,{onDrop:this.onDrop,maxSize:1024e4},function(t){var r=t.getRootProps,n=t.getInputProps,o=t.isDragActive;return a.a.createElement("div",W({},r(),{className:G()("dropzone",{"dropzone--isActive":o})}),a.a.createElement("input",n()),a.a.createElement("a",{href:"#/template",className:e.state.ajax?"doing-ajax":""},a.a.createElement("div",{className:"theme-screenshot"},a.a.createElement("span",null)),""!==e.state.error?a.a.createElement(d.a,{text:e.state.error,error:!0}):null,""!==e.state.message?a.a.createElement(d.a,{text:e.state.message,dismissable:!0,dismissableCallback:e.removeMessage}):null,a.a.createElement("h2",{className:"theme-name"},e.props.addTemplateText)),a.a.createElement("div",{className:"gfpdf-template-install-instructions"},e.props.templateInstallInstructions))}))}}]),t}();B(Q,"propTypes",{genericUploadErrorText:s.a.string,addTemplateText:s.a.string,filenameErrorText:s.a.string,filesizeErrorText:s.a.string,installSuccessText:s.a.string,installUpdatedText:s.a.string,templateSuccessfullyInstalledUpdated:s.a.string,templateInstallInstructions:s.a.string,addNewTemplate:s.a.func,updateTemplateParam:s.a.func,postTemplateUploadProcessing:s.a.func,clearTemplateUploadProcessing:s.a.func,templates:s.a.array,templateUploadProcessingSuccess:s.a.object,templateUploadProcessingError:s.a.object});var X=Object(i.b)(function(e){return{templates:e.template.list,templateUploadProcessingSuccess:e.template.templateUploadProcessingSuccess,templateUploadProcessingError:e.template.templateUploadProcessingError}},function(e){return{addNewTemplate:function(t){e(Object(u.p)(t))},updateTemplateParam:function(t,r,n){e(Object(u.E)(t,r,n))},postTemplateUploadProcessing:function(t,r){e(Object(u.t)(t,r))},clearTemplateUploadProcessing:function(){e(Object(u.r)())}}})(Q);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.d(t,"TemplateList",function(){return ae});var te,re,ne,ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,$(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,a.a.Component),function(e,t,r){t&&Z(e.prototype,t)}(t,[{key:"render",value:function(){var e=this,t=a.a.createElement(A,{header:this.props.templateHeaderText}),r=GFPDF.userCapabilities.administrator||GFPDF.userCapabilities.gravityforms_edit_settings||!1;return a.a.createElement(c.a,{header:t,closeRoute:"/"},a.a.createElement(F,null),a.a.createElement("div",null,this.props.templates.map(function(t,r){return a.a.createElement(w,{key:r,template:t,templateDetailsText:e.props.templateDetailsText,activateText:e.props.activateText})}),r&&a.a.createElement(X,{ajaxUrl:this.props.ajaxUrl,ajaxNonce:this.props.ajaxNonce,addTemplateText:this.props.addTemplateText,genericUploadErrorText:this.props.genericUploadErrorText,filenameErrorText:this.props.filenameErrorText,filesizeErrorText:this.props.filesizeErrorText,installSuccessText:this.props.installSuccessText,installUpdatedText:this.props.installUpdatedText,templateSuccessfullyInstalledUpdated:this.props.templateSuccessfullyInstalledUpdated,templateInstallInstructions:this.props.templateInstallInstructions})))}}]),t}();te=ae,re="propTypes",ne={templateHeaderText:s.a.string,templates:s.a.array,templateDetailsText:s.a.string,activateText:s.a.string,ajaxUrl:s.a.string,ajaxNonce:s.a.string,addTemplateText:s.a.string,genericUploadErrorText:s.a.string,filenameErrorText:s.a.string,filesizeErrorText:s.a.string,installSuccessText:s.a.string,installUpdatedText:s.a.string,templateSuccessfullyInstalledUpdated:s.a.string,templateInstallInstructions:s.a.string},re in te?Object.defineProperty(te,re,{value:ne,enumerable:!0,configurable:!0,writable:!0}):te[re]=ne,t.default=Object(i.b)(function(e){return{templates:Object(l.a)(e)}})(ae)}}]);
//# sourceMappingURL=12.js.map